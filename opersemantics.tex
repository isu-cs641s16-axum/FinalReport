\section{Dynamic Semantcs}
\label{sec:semantics}

{\bf TODO: present the domain, and the operational semantics rules here, 
and description of these rules that focuses on the new and interesting rules.}

\begin{figure}
\begin{center}
\begin{lstlisting}
Fixpoint support (s: schema_ty) : Type :=
	match s with
  	| STyNil => unit
  	| a *** => helper a
  	| a *** => (helper a) * support s'
  	end
with helper(c: col_ty) : Type :=
	match c with
	| CTyNat => nat
	| CTyBag s_nested => multiset (support s_nested)
	end.
\end{lstlisting}
%$\begin{array}{@{}l@{~}l@{\quad}l@{\!\!\!\!\!\!}r}
%schema\_ty : Set := \:\emph{Support} \\
%match \:s \:with & &\\
%\quad \mid STyNil => \:unit\\
%\quad \mid a *** => \:helper \:a\\
%\quad \mid a *** s' => \: (helper \:a) * support s' \\
%end \\
%with \:helper(c: \:col\_ty) : Type := & & \\
%match \:c \:with \\
%\quad \mid CTyNat => \:nat\\
%\quad \mid CTyBag s_nested => multiset (support \:s\_nested). \\
%end.
%\end{array}
%$
\end{center}
\caption{Schema Support}
\label{fig-schema_support}
\end{figure}

\begin{figure}
\begin{center}
\begin{lstlisting}
Inductive relation (s: schema_ty) : Type := 
| Relation: multiset (support s) -> relation s.
\end{lstlisting}
%$\begin{array}{@{}l@{~}l@{\quad}l@{\!\!\!\!\!\!}r}
%relation (s: schema\_ty): Type := & \ \ \ \ \ & \emph{Relation} \\
%& \quad \mid Relation: & multiset(support \:s) \rightarrow \: relation \:s\\
%\end{array}
%$
\end{center}
\caption{Relation}
\label{fig-relation}
\end{figure}

\begin{figure}
\begin{center}
\begin{lstlisting}
Definition relation_data (s: schema_ty) (r: relation s) : multiset (support s) :=
  match r with
  | Relation _ mset => mset
  end.
\end{lstlisting}
%$\begin{array}{@{}l@{~}l@{\quad}l@{\!\!\!\!\!\!}r}
%relation\_data (s: schema\_ty): (r: relation s) : multiset(support s) := & \ \ \ \ \ & \emph{Relational Data} \\
%& \quad match r with\\
%& \quad \mid Relation_mset 
%\end{array}
%$
\end{center}
\caption{Relation Data}
\label{fig-relationdata}
\end{figure}
